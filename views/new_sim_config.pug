extends layout.pug
block content
    h1 V. Creating a Simulator Configuration (New VELMA Application)
    ul 
        li Required Input Files
        li Configuration Steps
        li Start the JVelma GUI
        li Using the GUI
        li Using the GUI to Specify Startup and Input Parameters
        li Overview of the All Parameters Table of Contents (TOC)
        li All Parameters Table of Contents
    div.required_files
        h2 Required Input Files
        p The following simulation data input files must be available prior to creating a new VELMA application:
        ol
            li JPDEM flat-processed Grid ASCII (.asc) DEM map file. (see JPDEM user guide in Appendix 7)
            li Cover Species ID Grid ASCII map (.asc) file.
            li Cover Species Age Grid ASCII map (.asc) file.
            li Soil Parameters ID Grid ASCII map (.asc) file.
            li Daily Rainfall driver data file (.txt or .csv) file.
            li Daily Air Temperature data file (.txt or .csv) file.
    div.config_steps 
        h2 Configuration Steps
        p With the above files available, perform the following steps:
        ol 
            li Start the JVelma graphical user interface (GUI)
            li Create a New Simulator Configuration
            li Specify Startup Parameters
            li Specify Input Parameters
            li Specify Weather Parameters
            li Add and Specify Parameters for Each Cover Species
            li Add and Specify Parameters for Each Soil Parameterization
    h2 Start the JVelma GUI
    br 
    p To start the JVelma GUI, open a Windows command prompt, and launch the GUI via Java and the JVelma.jar file.
    p Here is an example of the form the startup command takes:
    p C:\&gt; java -Xmx1024m -jar C:\Some\full\Path\JVelma.jar
    p Of course, replace C:\Some\full\Path\ with the actual, fully-qualified path name of the location where your copyof the JVelma.jar file resides.
    p Here are a couple of screen captures showing actual command lines for starting JVelma:
    br 
    img(width="531" height="96" alt="image" src="public/Image_015.gif")
    p (In the above screen-capture, the double-quotes around the fully-qualified path+name of the JVelma.jar file arerequired because the text of the path contains whitespace.)
    br 
    img(width="517" height="107" alt="image" src="public/Image_016.gif")
    p (When there is no whitespace in the entire path the double-quotes are not required.)
    p The "-Xmx1024m" command line option specifies the amount of memory available to the JVelma GUI and simulator. Thevalue 1024 is in Megabytes, so this command line allocates a 1 Gigabyte memory space for the JVelma GUI andsimulator to run in. You can allocate more memory than 1 GB (e.g. the option "-Xmx4096m" would allocate 4 GB)but if you allocate more memory than your computer can make available, JVelma will fail to start properly.
    p Once you type in the command line and press the enter key, the JVelma GUI should begin running. Initially, theGUI looks like this:
    br 
    img(width="614" height="555" alt="image" src="public/Image_017.jpg")

    h2 Using the GUI 
    hr
    p Click the <b>Edit </b>menu's <b>Create a New, Empty Configuration </b>item:
    br 
    img(width="625" height="565" alt="image" src="public/Image_019.jpg")
    p Clicking this item creates a new, empty simulation configuration in the JVelma GUI and opens the <b>All    Parameters </b>table view. The All Parameters table lists the Group, Item and Parameter keys and the currentvalue of all the parameters used by a single VELMA simulation run. When we speak of the "SimulationConfiguration", this list of parameters is what we're speaking of.
    p For demonstration purposes, here is an annotated screen-captured snapshot of the All Parameters table for anexisting simulator configuration (cells under the Value column will be blank for new simulator configurations):
    
    br 
    img(width="661" height="586" alt="image" src="public/Image_020.jpg")
    br 
    p In addition to filtering by an arbitrary text string, the filter field at the top of the table can be set to anyof several pre-composed filtering expressions.
    p For example, In the All Parameters table, click "Clear Filters" at the left of side of the filter fields, thenclick the drop-down button (<img width="19" height="24" alt="image" src="public/Image_021.gif" />) on theright side of the leftmost filter field to display a drop-down menu (see demonstration, below).
    br 

    h2 Using the GUI to Specify Startup and Input Parameters
    h3 Specify Startup Parameters
    p In the All Parameters table, click the first (leftmost) filter field's drop-down button and select "startups"from the drop-down list:
    br 
    img(width="623" height="302" alt="image" src="public/Image_024.jpg")
    br 
    h4 The resulting display shows 13 "startups" parameters under the 3rd column. For now, we will focus on 2startup parameters that VELMA uses to locate simulation input files at the start of a simulation. You will needto specify a valid value in the 4th column for these:
    table
        tr 
            td.param_name inputDataLocationDirName:
            td.param_desc The name of the directory containing your simulation input data files
        tr 
            td.param_name inputDataLocationRootName 
            td.param_desc The fully-qualified path above the directory name you specified for inputDataLocationDirName
    
    h3 Specify Input Parameters
    p Under the All Parameters menu tab, in the 2nd filter field to the left of the "Clear Filters" button, type"VelmaInputs" (case sensitive, without the double-quotes):
    img(width="625" height="278" alt="image" src="public/Image_025.jpg")
    br 
    h4 In the displayed subset of configuration parameters, enter values for the following parameters:
    table
        tr 
            td.param_name input_dem
            td.param_desc The name (plus extension, ".asc") of this simulation's DEM spatial data file. The simulator will lookfor the file in the directory specified by the inputDataLocationDirName + "/" + inputDataLocationRootName thatyou specified as Startups parameters.
        tr 
            td.param_name cell
            td.param_desc The width of a cell in the DEM grid (should match the "cellsize" header value in the DEM Grid ASCII file andwill be a value in meters).
        tr 
            td.param_name ncol
            td.param_desc The number of columns in the DEM grid (should match the DEM Grid ASCII file's ncols header value).
        tr 
            td.param_name nrow
            td.param_desc The number of rows in the DEM grid (should match the DEM Grid ASCII file's nrows header value).
        tr 
            td.param_name cellOffsetX
            td.param_desc Horizontal (column) offset of the DEM&#39;s zeroth pixel in meters.
        tr 
            td.param_name cellOffsetY
            td.param_desc Vertical (row) offset of the DEM&#39;s zeroth pixel in meters.
        tr 
            td.param_name outx
            td.param_desc The zero-based x-coordinate (column index) of the outlet cell for this simulation's watershed.
        tr 
            td.param_name outy
            td.param_desc The zero-based y-coordinate (row index) of the outlet cell for this simulation's watershed.
        tr 
            td.param_name coverAgeMapFileName
            td.param_desc The name (and ".asc" extension) of this simulation's cover species age spatial data map.
        tr 
            td.param_name coverSpeciesIndexMapFileName
            td.param_desc The name (and ".asc" extension) of this simulation's cover species ID spatial data map.
        tr 
            td.param_name soilParametersIndexMapFileName
            td.param_desc The name (and ".asc" extension) of this simulation's soil parameterizations ID spatial data map.
        tr 
            td.param_name forcing_start
            td.param_desc The first year (inclusive) of temporal data available for simulation runs.
        tr 
            td.param_name forcing_end
            td.param_desc The last year (inclusive) of temporal data available for simulation runs.
        tr 
            td.param_name syear
            td.param_desc The starting year of the simulation run.
        tr 
            td.param_name eyear
            td.param_desc The ending year of the simulation run.
        tr 
            td.param_name input_runoff
            td.param_desc The name of the observed runoff data for simulation runs. (Specifying this file is optional, buthighly recommended.)
        tr 
            td.param_name input_stream_chem
            td.param_desc The name of the observed stream chemistry data for simulation runs. (Specifying this file is optional, but highly recommended.)
        tr 
            td.param_name run_index
            td.param_desc The name of the directory where the VELMA simulation will save simulation results files.
        tr 
            td.param_name initializeOutputDataLocationRoot
            td.param_desc The fully-qualified path above the directory name you specifiedfor the run_index.
    br 
    p The drop-down filter field menu above the "Group" column can also be used to add and specify parameters for theother parameter categories listed: cover, disturbance, cellDataWriter, spatialDataWriter, soil,and weather:
    img(width="627" height="164" alt="image" src="public/Image_026.jpg")
    p However, we recommend that you use the "All Parameters Table of Contents" described in the next section to configure these and other subsets of parameters.

    
