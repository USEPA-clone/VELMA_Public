<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width">
  <meta name="charset" content="utf-8">
  <link rel="stylesheet" type="text/css" href="/style.css">
  <title></title>

<body class="bg-primary">
  <div class="header blue-base">
    <nav class="navbar blue-base navbar-expand"><a class="navbar-brand" href="/index.html">VELMA 2.2 HOME</a>
      <ul class="navbar-nav no-bullets">
        <li class="nav-item"><a class="nav-link" href="/intro.html"><span>I. Intro</span></a></li>
        <li class="nav-item"><a class="nav-link" href="/changes.html"><span>II. Changes from 1.0</span></a></li>
        <li class="nav-item"><a class="nav-link" href="/about.html"><span>III. About</span></a></li>
        <li class="nav-item"><a class="nav-link" href="/input_files.html"><span>IV. Input Files </span></a></li>
        <li class="nav-item"><a class="nav-link" href="/new_sim_config.html"><span>V. Sim Config</span></a></li>
        <li class="nav-item"><a class="nav-link" href="/parameter_config.html"><span>VI. Parameter Config</span></a></li>
        <li class="nav-item dropdown">Appendicies<ul class="nav-dropdown blue-light">
            <li class="nav-item"><a class="nav-link" href="/appendix_1.html"><span>Appendix 1</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/appendix_2.html"><span>Appendix 2</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/appendix_3.html"><span>Appendix 3</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/appendix_4.html"><span>Appendix 4</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/appendix_5.html"><span>Appendix 5</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/appendix_6.html"><span>Appendix 6</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/appendix_7.html"><span>Appendix 7</span></a></li>
          </ul>
        </li>
        <li class="nav-item dropdown">Supplemental <ul class="nav-dropdown blue-light">
            <li class="nav-item"><a class="nav-link" href="/supplement-a1.html"><span>Supplement A1</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-a2.html"><span>Supplement A2</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-a3.html"><span>Supplement A3</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-a4.html"><span>Supplement A4</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-b1.html"><span>Supplement B1</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-b2.html"><span>Supplement B2</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-b3.html"><span>Supplement B3</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-b4.html"><span>Supplement B4</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-b5.html"><span>Supplement B5</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-b6.html"><span>Supplement B6</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-b7.html"><span>Supplement B7</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-b8.html"><span>Supplement B8</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-b9.html"><span>Supplement B9</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-b10.html"><span>Supplement B10</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-c1.html"><span>Supplement C1</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-c2.html"><span>Supplement C2</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-c3.html"><span>Supplement C3</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-d1.html"><span>Supplement D1</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-d2.html"><span>Supplement D2</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-d3.html"><span>Supplement D3</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-d4.html"><span>Supplement D4</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-d5.html"><span>Supplement D5</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-d6.html"><span>Supplement D6</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-d7a.html"><span>Supplement D7a</span></a></li>
                        <li class="nav-item"><a class="nav-link" href="/supplement-d7b.html"><span>Supplement D7b</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-d8.html"><span>Supplement D8</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-d9.html"><span>Supplement D9</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-d10.html"><span>Supplement D10</span></a></li>
          </ul>
        </li>
        <li class="nav-item dropdown"> <a class="nav-link" href="/dev_info.html"><span>Developer Info</span></a>
          <ul class="nav-dropdown blue-light">
            <li class="nav-item"><a class="nav-link" href="/GetVelma_ForEclipse.html"><span>Clone Github to Local Machine</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/CellSpecificBurnDisturbance_Configuration_Guide.html"><span>Cell Specific Burn Disturbance Config Guide</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/Configuration_Checker_Guide.html"><span>Configuration Checker Guide</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/DefaultSedimentModel_Configuration_Guide.html"><span>Default Sediment Model Config Guide</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/ForestBurnLsrDisturbanceModel_Overview.html"><span>Forest Burn LSR Disturbance Model</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/JPDEM_ReachMapping_Demonstration.html"><span>JPDEM Reaching Mapping Demo</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/MinMaxAirT_WeatherDrivers.html"><span>Min Max Air Temp Weather Drivers</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/ModifySpatialDataByMap_Guide.html"><span>Modify Spatial Data by Map Guide</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/ObsRunoff_and_NaNs.html"><span>OBS Runnoff and NaNs</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/OrganicContaminant_Overview.html"><span>Organic Contaminant Overview</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/OrganicContaminant_Remediation_Configuration_Guide.html"><span>Organic Contaminant Redemption Config Guide</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/OrganicContaminant_Tracer_Configuration_Guide.html"><span>Organic Contaminant Tracter Config Guide</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/ReachSpecificObservedRunnoff.html"><span>Reach Specific Observed Runnoff</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/Sediment_Output_Data_Summary.html"><span>Sediment Output Data Summary</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/SnowDepth_Initialization_Guide.html"><span>Snow Depth Initialization Guide</span></a></li>
          </ul>
        </li>
        <li class="nav-item dropdown"> <a class="nav-link" href="/dev_utils.html"><span>Developer Utils</span></a>
          <ul class="nav-dropdown blue-light">
            <li class="nav-item"><a class="nav-link" href="/AscMapOct_Guide.html"><span>Ascii Map Oct Guide </span></a></li>
            <li class="nav-item"><a class="nav-link" href="/AscRangeMask_Guide.html"><span>Ascii Range Mask Guide</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/MoeVelGenerator_Guide.html"><span>MOEA-to-VELMA Configuration Generator</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/NashSutcliffeCalculator_Guide.html"><span>Tool for Computing Nash-Sutcliffe Coefficients</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/NseQuarts_Guide.html"><span>NseQuarts Guide</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/VelmaSimRunner_QuickRef.html"><span>VelmaSimRunner Quick Reference</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/VelmaSimRunner.html"><span>VelmaSimRunner Full Guide</span></a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </div>
  <div class="main_body">
    <div class="container">
      <h1>Checking a Configuration for Warnings or Errors</h1>
      <h2>Overview</h2>
      <p>The VELMA simulator produces an extensive number of logger messages during a simulation's initialization and running time.
        In the JVelma GUI the messages appear in the Console tab, while VELMA command-line invocations emit them directly to the command-line's output.
        The messages convey the progress and status of the simulation attempt.
        When a simulation fails to run as expected the logger messages can provide clues for identifying and correcting issues responsible for the failure.</p>
      <p>However, the large number of total messages can obscure the smaller number of warning or error messages that are useful for identifying and correcting configuration problems.
        To highlight warning and error messages, and to make them available without actually running a simulation, the VELMA simulator provides a configuration-check option.
        When selected, the VELMA simulator performs its initialization step, but then halts without actually running,
        and during the initialization step, only warning and error messages are displayed.</p>
      <h3>Caveats and Limitations</h3>
      <h4>Availablity</h4>
      <p>The Configuration-Checker function is only available in VELMA version 2.0.1.34 or later.<br>
        The Configuration-Checker is only available via the JVelma GUI or VelmaSimulatorCmdLine.<br>
        (Although it is unavailable for VelmaParallelCmdLine, you can use VelmaSimulatorCmdLine to check any VELMA simulation configuration .xml file before running that same .xml file under VelmaParallelCmdLine.)</p>
      <h4>Running Time and Completion</h4>
      <p>During the configuration-check VELMA performs a full initialization of the specified configuration.<br>
        If your simulation takes a long time to initialize, it will take a long time to check.<br>
        If your simulation does not allocate enough memory (via the Java -Xmx option) and crashes during initialization, that will happen during the check attempt as well.<br>
        If your simulation invocation is in some way invalid, it may crash before the checker even starts (however, this is almost exclusively a VelmaSimulatorCmdLine-usage concern).</p>
      <h4>Results Interpretation</h4>
      <p>A &quot;clean&quot; checker result (i.e. minimal warnings and no errors) does <em><strong>not</strong></em> guarrantee that the checked configuration will run correctly or to completion.<br>
        Some warnings and errors only occur during a simulation run: since the checker does not run the simulation, runtime-specific warnings or errors will not be revealed.
        The checker results are only as thorough as the existing initialization code's ability to identify and report warnings or errors.
        (The VELMA development group hopes to provide additional configuration-checking code in future versions.)</p>
      <p>A &quot;dirty&quot; checker result does <em><strong>not</strong></em> guarrantee that the checked configuration will fail to run, or run incorrectly.<br>
        If you see a <code>SEVERE</code> logger message, you can be fairly certain the checked configuration will fail to run, however the checker may produce warnings that you know are &quot;ok&quot;, and can freely ignore.<br>
        For example, the following warning:</p>
      <pre><code>WARNING 2021-01-29 10:15:49 CellDataWriterManager: IGNORED CellDataWriter: name=OffGrid at cell x=90 y=90 index=-1 [OFF-GRID LOCATION (Grid is: cols=86 rows=67)]
</code></pre>
      <p>indicates that a cell data writer in the configuration has invalid coordinates for the current DEM grid, and that it will be ignored if the simulation is actually run.
        If you do not care about this cell data writer (perhaps it's a leftover from .xml-reuse), you can ignore this warning.
        On the other hand, if you are counting on data generated by this cell data writer as part of your simulation results, you should review the configuration and see why it is parameterized to an invalid location.</p>
      <h2>Usage</h2>
      <h3>Checking a Configuration With the JVelma GUI</h3>
      <ol>
        <li>Start JVelma and load a simulation configuration .xml file.</li>
        <li>Select and click JVelma's <code>Edit --&gt; Check Current Configuration</code> menu item.</li>
        <li>Focus will shift to JVelma's Console tab, and warning and/or error messages will appear there.<br>
          (The text can be marked, copied, and pasted to Notepad or other Windows clipboard-aware apps.)<br>
          The messages will remain in the Console tab until you perform one of the following actions:
          <ul>
            <li>Load a different simulation configuration .xml file.</li>
            <li>Run Check Current Configuration again.</li>
            <li>Start a simulation run.</li>
          </ul>
        </li>
      </ol>
      <p>Here is a screen-capture showing selection of the &quot;Check Current Configuration&quot; menu item:<br>
        <img src="public/image-JVelma_Edit_CheckConfiguration_Menu.PNG" alt="An image showing the Check Current Configuration menu item">
      </p>
      <p>This is an example of what the JVelma Console output looks like when the &quot;Check Current Configuration&quot; menu item is selected:
        <img src="public/image-JVelma_Console_CheckConfiguration_Output.PNG" alt="An image showing example Check Current Configuration results in the JVelma Console tab">
      </p>
      <h3>Checking a Configuration With VelmaSimulatorCmdLine</h3>
      <ol>
        <li>Open an MS Powershell Window.</li>
        <li>Invoke VelmaSimulatorCmdLine with your specified configuration .xml file as though you are actually running it,<br>
          <strong>but:</strong> add the <code>--lint</code> option to the commane line.
        </li>
        <li>Warning and/or error messages will echo to the Powershell window.</li>
      </ol>
      <p>Here is an example using VelmaSimulatorCmdLine:</p>
      <pre><code>Windows PowerShell
Copyright (C) Microsoft Corporation. All rights reserved.

PS C:\Users\me&gt; java -Xmx1g -cp C:\Users\me\Velma\JVelma.jar `
&gt;&gt; gov.epa.velmasimulator.VelmaSimulatorCmdLine `
&gt;&gt; C:\Users\me\Velma\Case_Studies\MD_Chesapeake\WS109\XMLs\MD_RR_WS109_10m_badCdw_2020-10-28a.xml `
&gt;&gt; --lint
VELMA LINTER: started at 2021-02-03 11:17:01
WARNING VelmaSimulatorEngine runLinter: VELMA Lint Mode Enabled: startups parameter suppressAllOutputFiles overridden and set == true
WARNING GlobalState setOutputDataLocationDir: All File Output is suppressed: ignoring Output Data Location
WARNING SoilParameters setSoilLayerWeights: Soil column weights [0.16670000553131104, 0.16670000553131104, 0.16670000553131104, 0.5] sum=1.0001 but should sum to 1.0 -- either the initial values are incorrect or the floating-point arithmetic produced an inexact result.
WARNING SoilParameters setSoilLayerWeights: Soil column weights [0.018200000748038292, 0.018200000748038292, 0.018200000748038292, 0.9455000162124634] sum=1.0001 but should sum to 1.0 -- either the initial values are incorrect or the floating-point arithmetic produced an inexact result.
WARNING SoilParameters setSoilLayerWeights: Soil column weights [0.022199999541044235, 0.022199999541044235, 0.022199999541044235, 0.9333000183105469] sum=0.9999 but should sum to 1.0 -- either the initial values are incorrect or the floating-point arithmetic produced an inexact result.
WARNING SoilParameters setSoilLayerWeights: Soil column weights [0.028599999845027924, 0.028599999845027924, 0.028599999845027924, 0.9143000245094299] sum=1.0001 but should sum to 1.0 -- either the initial values are incorrect or the floating-point arithmetic produced an inexact result.
WARNING GlobalState initializeCoverSpeciesForRun: CoverSpecies uniqueId=500 uniqueName=&quot;NoData&quot; referenced in: dem=NO sid=NO inSidCount=0
WARNING CellDataWriterManager load: IGNORED CellDataWriter: name=OffGrid at cell x=90 y=90 index=-1 [OFF-GRID LOCATION (Grid is: cols=86 rows=67)]
VELMA LINTER: done at 2021-02-03 11:17:02
PS C:\Users\me&gt;
</code></pre>
      <blockquote>
        <p>Sidenote: The above example uses a whitespace + backtick (&quot;`&quot;, <em>not</em> the single-quote character) sequence to break the single command line into multiple, shorter lines that are easier to read.
          This is a built-in feature of the Windows PowerShell console: when you type a whitespace character, then a backtick character, then the return key, the PowerShell console inserts a line break, but then continues the command onto the new line, prefixed by &quot;&gt;&gt;&quot;.
          Use this feature carefully: only break lines at whitespace within your overall command line (e.g. do <em>not</em> break a filename across two separate lines).</p>
      </blockquote>
      <h3>Output Notes</h3>
      <p>Running the Configuration Checker always causes the following warning messages to occur:</p>
      <pre><code>WARNING VelmaSimulatorEngine runLinter: VELMA Lint Mode Enabled: startups parameter suppressAllOutputFiles overridden and set == true
WARNING GlobalState setOutputDataLocationDir: All File Output is suppressed: ignoring Output Data Location
</code></pre>
      <p>The first message occurs because the Configuration Checker always overrides a single parameter from the .xml file it checks: the <code>suppressAllOutputFiles</code> parameter. It forces it to <code>true</code> because under normal circumstances the VELMA simulator may write output files to the specified output location during initialization, and the Configuration Checker doesn't want you to have to clean up any generate-but-unused results folders/files afterwards.)<br>
        The second message occurs because of the first: whenever <code>suppressAllOutputFiles == true</code>, VELMA's initialization code issues a warning, so that the user should not expect any output.</p>
      <p>When the Configuration Checker is run from JVelma, the following messages should appear first:</p>
      <pre><code>Checking the current configuration via the VELMA Linter.
Configuration editing is not permitted until the Linter is done.
</code></pre>
      <p>These messages simply confirm that the Checker is running, and that you cannot edit your configuration while it runs.
        You <em>can</em> navigate around the JVelma GUI's other tabs while the Checker is running, but it may snap the focus back to the Console tab when it is done.</p>
      <p>Regardless of where it is run, the Configuration Checker brackets its output with a pair of messages:</p>
      <pre><code>VELMA LINTER: started at 2021-02-03 11:17:01
[ . . . ]
VELMA LINTER: done at 2021-02-03 11:17:02
</code></pre>
      <blockquote>
        <p>Sidenote: Whence the &quot;Linter&quot; and &quot;Lint&quot; Terminology?<br>
          Within VELMA, the configuration-checker code is called the &quot;linter&quot;.<br>
          Among software developers, &quot;linting&quot; refers to scanning code for issues that, while not fatal, may be undesirable.
          The term originates from a 1970s-era Unix tool that scanned C programs for issues that were not serious enough to trigger a compiler error, but which might still require review or correction.</p>
      </blockquote>

    </div>
  </div>
</body>
<footer id="footer">
  <p>VELMA 2.2 DOCUMENTATION</p>
</footer>
</head>

</html>