<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"><meta name="charset" content="utf-8"><link rel="stylesheet" type="text/css" href="/style.css"><title> </title></head><body class="bg-primary"><div class="header blue-base"><nav class="navbar blue-base navbar-expand"><a class="navbar-brand" href="/index.html">VELMA 2.2 HOME</a><ul class="navbar-nav no-bullets"><li class="nav-item"><a class="nav-link" href="/intro.html"><span>I. Intro</span></a></li><li class="nav-item"><a class="nav-link" href="/changes.html"><span>II. Changes from 1.0</span></a></li><li class="nav-item"><a class="nav-link" href="/about.html"><span>III. About</span></a></li><li class="nav-item"><a class="nav-link" href="/input_files.html"><span>IV. Input Files </span></a></li><li class="nav-item"><a class="nav-link" href="/new_sim_config.html"><span>V. Sim Config</span></a></li><li class="nav-item"><a class="nav-link" href="/parameter_config.html"><span>VI. Parameter Config</span></a></li><li class="nav-item dropdown">Appendicies<ul class="nav-dropdown blue-light"><li class="nav-item"><a class="nav-link" href="/appendix_1.html"><span>Appendix 1</span></a></li><li class="nav-item"><a class="nav-link" href="/appendix_2.html"><span>Appendix 2</span></a></li><li class="nav-item"><a class="nav-link" href="/appendix_3.html"><span>Appendix 3</span></a></li><li class="nav-item"><a class="nav-link" href="/appendix_4.html"><span>Appendix 4</span></a></li><li class="nav-item"><a class="nav-link" href="/appendix_5.html"><span>Appendix 5</span></a></li><li class="nav-item"><a class="nav-link" href="/appendix_6.html"><span>Appendix 6</span></a></li><li class="nav-item"><a class="nav-link" href="/appendix_7.html"><span>Appendix 7</span></a></li></ul></li><li class="nav-item dropdown">Supplemental <ul class="nav-dropdown blue-light"><li class="nav-item"><a class="nav-link" href="/supplement-a1.html"><span>Supplement A1</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-a2.html"><span>Supplement A2</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-a3.html"><span>Supplement A3</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-a4.html"><span>Supplement A4</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-b1.html"><span>Supplement B1</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-b2.html"><span>Supplement B2</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-b3.html"><span>Supplement B3</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-b4.html"><span>Supplement B4</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-b5.html"><span>Supplement B5</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-b6.html"><span>Supplement B6</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-b7.html"><span>Supplement B7</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-b8.html"><span>Supplement B8</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-b9.html"><span>Supplement B9</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-b10.html"><span>Supplement B10</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-c1.html"><span>Supplement C1</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-c2.html"><span>Supplement C2</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-c3.html"><span>Supplement C3</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-d1.html"><span>Supplement D1</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-d2.html"><span>Supplement D2</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-d3.html"><span>Supplement D3</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-d4.html"><span>Supplement D4</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-d5.html"><span>Supplement D5</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-d6.html"><span>Supplement D6</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-d7a.html"><span>Supplement D7a</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-d7b.html"><span>Supplement D7b</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-d8.html"><span>Supplement D8</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-d9.html"><span>Supplement D9</span></a></li><li class="nav-item"><a class="nav-link" href="/supplement-d10.html"><span>Supplement D10</span></a></li></ul></li><li class="nav-item dropdown"> <a class="nav-link" href="/dev_info.html"><span>Developer Info</span></a><ul class="nav-dropdown blue-light"><li class="nav-item"><a class="nav-link" href="/GetVelma_ForEclipse.html"><span>Clone Github to Local Machine</span></a></li><li class="nav-item"><a class="nav-link" href="/CellSpecificBurnDisturbance_Configuration_Guide.html"><span>Cell Specific Burn Disturbance Config Guide</span></a></li><li class="nav-item"><a class="nav-link" href="/Configuration_Checker_Guide.html"><span>Configuration Checker Guide</span></a></li><li class="nav-item"><a class="nav-link" href="/DefaultSedimentModel_Configuration_Guide.html"><span>Default Sediment Model Config Guide</span></a></li><li class="nav-item"><a class="nav-link" href="/Sediment_Output_Data_Summary.html"><span>Sediment Output Data Summary</span></a></li><li class="nav-item"><a class="nav-link" href="/ForestBurnLsrDisturbanceModel_Overview.html"><span>Forest Burn LSR Disturbance Model</span></a></li><li class="nav-item"><a class="nav-link" href="/JPDEM_ReachMapping_Demonstration.html"><span>JPDEM Reaching Mapping Demo</span></a></li><li class="nav-item"><a class="nav-link" href="/MinMaxAirT_WeatherDrivers.html"><span>Min Max Air Temp Weather Drivers</span></a></li><li class="nav-item"><a class="nav-link" href="/ModifySpatialDataByMap_Guide.html"><span>Modify Spatial Data by Map Guide</span></a></li><li class="nav-item"><a class="nav-link" href="/ObsRunoff_and_NaNs.html"><span>OBS Runnoff and NaNs</span></a></li><li class="nav-item"><a class="nav-link" href="/OrganicContaminant_Overview.html"><span>Organic Contaminant Overview</span></a></li><li class="nav-item"><a class="nav-link" href="/OrganicContaminant_Remediation_Configuration_Guide.html"><span>Organic Contaminant Redemption Config Guide</span></a></li><li class="nav-item"><a class="nav-link" href="/OrganicContaminant_Tracer_Configuration_Guide.html"><span>Organic Contaminant Tracter Config Guide</span></a></li><li class="nav-item"><a class="nav-link" href="/ReachSpecificObservedRunnoff.html"><span>Reach Specific Observed Runnoff</span></a></li><li class="nav-item"><a class="nav-link" href="/SnowDepth_Initialization_Guide.html"><span>Snow Depth Initialization Guide</span></a></li><li class="nav-item"><a class="nav-link" href="/TopoFiles_Output_Summary.html"><span>Topo Files Output Summary </span></a></li><li class="nav-item"><a class="nav-link" href="/VelmaParallel_Error_Reports.html"><span>Velma Parallel Error Reports</span></a></li><li class="nav-item"><a class="nav-link" href="/VelmaParallel_With_Multiple_Maps.html"><span>Velma Parallel With Multiple Maps </span></a></li><li class="nav-item"><a class="nav-link" href="/WaterDrainDisturbanceModel_Overview.html"><span>Water Drain Disturbance Model</span></a></li><li class="nav-item"><a class="nav-link" href="/VelmaSimulatorCmdLine_Overview.html"><span>Velma Sim Cmd Line Guide</span></a></li><li class="nav-item"><a class="nav-link" href="/VelmaSimulatorAltCmdLine_Overview.html"><span>Velma Sim Alt Cmd Line Guide</span></a></li><li class="nav-item"><a class="nav-link" href="/SurfaceEvaporation_Overview.html"><span>Surface Evaporation Overview</span></a></li></ul></li><li class="nav-item dropdown"> <a class="nav-link" href="/dev_utils.html"><span>Developer Utils</span></a><ul class="nav-dropdown blue-light"><li class="nav-item"><a class="nav-link" href="/AscMapOct_Guide.html"><span>Ascii Map Oct Guide </span></a></li><li class="nav-item"><a class="nav-link" href="/AscRangeMask_Guide.html"><span>Ascii Range Mask Guide</span></a></li><li class="nav-item"><a class="nav-link" href="/MoeVelGenerator_Guide.html"><span>MOEA-to-VELMA Configuration Generator</span></a></li><li class="nav-item"><a class="nav-link" href="/NashSutcliffeCalculator_Guide.html"><span>Tool for Computing Nash-Sutcliffe Coefficients</span></a></li><li class="nav-item"><a class="nav-link" href="/NseQuarts_Guide.html"><span>NseQuarts Guide</span></a></li><li class="nav-item"><a class="nav-link" href="/VelmaSimRunner_QuickRef.html"><span>VelmaSimRunner Quick Reference</span></a></li><li class="nav-item"><a class="nav-link" href="/VelmaSimRunner.html"><span>VelmaSimRunner Full Guide</span></a></li></ul></li></ul></nav></div><div class="main_body container"><h1>Appendix 7</h1><h2>Creating Flat-Processed DEM Data For The VELMA Simulator and Determining Outlet and Watershed Delineation    </h2><hr><p>The VELMA Simulator requires a Digital Elevation Map (DEM) for any simulation it runs. This DEM contains elevation data for the area simulated.    </p><p>The area specified must contain no &quot;sinks&quot; or &quot;flat spots&quot;.    </p><p>When VELMA simulates surface waterflow it must be able to flow &quot;off&quot; the map area in some way. Water is not allowed to pool anywhere within the simulation area.</p><p>In order to ensure this &quot;no flat spots rule&quot;, DEM data used by the VELMA Simulator is first &quot;flat-processed&quot; to remove any sinks or flat spots.    </p><p>Use JPDEM to prepare DEM data for use by the VELMA Simulator.    </p><h5>NOTE    </h5><p>You must have Java 1.7 installed on your computer to run JPDEM.</p><h3>Start JPDEM</h3><p>Open a Windows Command Line and enter the command:</p><p>C:\&gt; java -Xmx1024m -jar C:\full\path\to\JPDEM.jar</p><p>The &quot;-Xmx1024m&quot; tells the Java Runtime Environment (JRE) to let JPDEM have 1024 megabytes (1gigabyte) of working memory.</p><p>If your machine doesn&#39;t have that much memory, substitute a smaller value (e.g. &quot;512&quot; instead of&quot;1024&quot;). Alternately, if the .asc file of DEM data you intend to load is very large (and your machinehas the memory) you may substitute a larger value (e.g. &quot;2048&quot; instead of &quot;1024&quot;).</p><p>If the full path to the JPDEM.jar file contains whitespace characters, place double-quotes around the path.</p><p>Example:</p><p>&quot;C:\full\path\with white space\to\JPDEM.jar&quot;</p><h3>Loading DEM Data Into JPDEM</h3><p>Load a &quot;raw&quot; DEM file into JPDEM (the file must be in standard ESRI Grid .asc format). Click the&quot;File&quot; menu, then select and click &quot;Load DEM File&quot;.</p><p>The &quot;Select DEM File to Load&quot; dialog window opens.</p><p>Browse to the location of your DEM file, and click the name of the DEM file. The DEM file&#39;s name appears inthe &quot;File Name:&quot; text box.</p><p>Click &quot;Load File&quot; to load that file&#39;s data into JPDEM.</p><p>The file is loaded, and an image of the file appears in JPDEM&#39;s map display.</p><p>If the file is too small (has few rows and columns), click the Image Scale up-arrow button to &quot;zoomin&quot;.</p><h3>Flat Processing DEM Data In JPDEM</h3><p>Click the &quot;Tools&quot; menu, then select and click &quot;Flat-Process DEM Data (Standard)&quot;.</p><p>JPDEM will process the DEM, adjusting elevation data to remove flat spots or sinks within the DEM data&#39;sarea.</p><p>If the processing takes more than a second or two, the display will periodically update, showing remaining flatspots in blue.</p><p>When the flat-processing algorithm finishes, the display shifts to a grey-scale representation, withdarker-colored pixels representing cells with higher flow-accumulation values.</p><p>Note:</p><p>There are several menu options for Flat-Processing DEM data.</p><p>The &quot;(Standard)&quot; menu item uses an algorithm that produces good results, but generally takes more timeto produce them. We do not, at this time, recommend using the other two flat- processing algorithms. They arestill being developed.</p><h3>Saving Flat-Processed DEM Data From JPDEM To a File</h3><p>After JPDEM finishes flat-processes DEM data, click the &quot;File&quot; menu, then click the &quot;Save DEM As...&quot; submenu, and finally select and click the &quot;Ascii Grid&quot; menu item.</p><p>The &quot;Save DEM Grid to File&quot; dialog window opens.</p><p>Browse to the location you wish to save the data in, then type a name for the file in the &quot;File Name:&quot;text box.</p><p>Finally, click the &quot;Save File&quot; button to save the DEM data to the specified file name and location.</p><p>Note</p><p>Flat-processed DEM data may be loaded into JDPEM just like &quot;raw&quot; DEM data.</p><p>Flat-processed DEM date does not need to be flat-processed again after it is loaded into JPDEM. However, to viewthe flow-accumulation grey-scale visualization of that flat-processed data, you must determine the flow datainformation for the flat-processed DEM values.</p><h2>Watershed Delineation</h2><h3>Determining Flow Data For a Flat-Processed DEM</h3><p>Load a flat-processed DEM .asc file into JPDEM, in the same way you would load a &quot;raw&quot; DEM file.</p><p>After loading the DEM data, click the &quot;Tools&quot; menu, then select and click the &quot;Determine DEM FlowData (Standard)&quot; menu item.</p><p>JPDEM will then compute flow data (flow direction and accumulation values) for each cell in the DEM area.</p><p>Once the flow data is computed, JPDEM will shift the display to the flow-accumulation grey- scale visualization.</p><h6>Note</h6><p>Loading a &quot;raw&quot; DEM file and then immediately trying to determine DEM flow data should not crash JPDEM,but it won&#39;t result in any meaningful information either.</p><h6>Note</h6><p>The difference in results between the &quot;(Standard)&quot; and &quot;(Alternate)&quot; flow data algorithmsshould be zero or very small.</p><p>You may use either algorithm. The Alternate algorithm is somewhat faster, but often not much faster than theStandard algorithm.</p><h3>Determining Watershed Delineation</h3><p>Flat-processed, flow-accumulated DEM data in JDEM may be used to determine the delineation relative to aspecified outlet cell (i.e. the set of cells that flow &quot;to&quot; a specified &quot;outlet&quot; cell).</p><p>In order to compute the delineation for an outlet cell, you must first specify the coordinates of the outletcell.</p><p>You can do this either by entering the zero-based x (column) and y (row) coordinates of the outlet cell in the&quot;Outlet X=&quot; and &quot;Y =&quot; number boxes, above JPDEM&#39;s map display, or by using the mouse.</p><h3>To select an outlet cell using the mouse, do the following:</h3><p>Move the mouse pointer over the cell you wish to select. Press down on either the right or left mouse button.</p><p>A context menu should pop-up, containing information about the cell you are pointing at. Holding the mouse button down, drag the mouse pointer onto the menu item containing cell info (the info should highlight), then release the mouse button.</p><p>The menu goes away, and the x and y coordinates for the cell you selected appear in the &quot;Outlet X = &quot; and &quot;Y = &quot; number boxes above the map display.</p><h6>Note:</h6><p>&quot;Zoom in&quot; on the map display by clicking the up-arrow button of the &quot;Image Scale&quot; to make selecting a specific cell easier. For example, at &quot;Image Scale 3&quot;, for example, every cell isdisplayed by 3x3 pixels.</p><p>However, on very large maps zooming too far in can crash the display, because it may run out of memory.</p><p>Once the coordinates of an outlet cell are specified, click the &quot;Tools&quot; menu, then select and click the &quot;Delineate DEM Data (Experimental)&quot; menu item.</p><p>JPDEM will then compute the delineation (i.e. the area of cells) for the currently specified &quot;Outlet X =&quot; and &quot;Y =&quot; values.</p><p>The resulting area is displayed in a logarithmic-coloring blue-red scale, superimposed over the grey-scale of the flow-accumulation display.</p><p>If the delineation looks incorrect, change the outlet cell coordinates and re-run the delineation. When the delineation looks correct, record the &quot;Outlet X =&quot; and &quot;Y =&quot; values for future reference and use with JVELMA. (JPDEM does not &quot;record&quot; outlet values anywhere.)</p><h6>Note</h6><p>There are currently four different JPDEM delineation algorithm implementations to choose from.</p><p>We believe they all produce the same results (except possibly for cells on the edge of the DEM</p><p>area -- which is an acceptable difference). However, they vary greatly in how long they take to run. Use the &quot;(Experimental)&quot; algorithm for delineation: it runs significantly faster than any of the other delineation implementations. In particular, <i><b>do not </b></i>use the &quot;(PDEM-2)&quot; algorithm, which can take a very long time to run, even for small maps.</p></div></body><footer id="footer"><p>VELMA 2.2 DOCUMENTATION</p></footer></html>