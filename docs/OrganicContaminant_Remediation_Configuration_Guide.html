<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width">
  <meta name="charset" content="utf-8">
  <link rel="stylesheet" type="text/css" href="/style.css">
  <title></title>

<body class="bg-primary">
  <div class="header blue-base">
    <nav class="navbar blue-base navbar-expand"><a class="navbar-brand" href="/index.html">VELMA 2.2 HOME</a>
      <ul class="navbar-nav no-bullets">
        <li class="nav-item"><a class="nav-link" href="/intro.html"><span>I. Intro</span></a></li>
        <li class="nav-item"><a class="nav-link" href="/changes.html"><span>II. Changes from 1.0</span></a></li>
        <li class="nav-item"><a class="nav-link" href="/about.html"><span>III. About</span></a></li>
        <li class="nav-item"><a class="nav-link" href="/input_files.html"><span>IV. Input Files </span></a></li>
        <li class="nav-item"><a class="nav-link" href="/new_sim_config.html"><span>V. Sim Config</span></a></li>
        <li class="nav-item"><a class="nav-link" href="/parameter_config.html"><span>VI. Parameter Config</span></a></li>
        <li class="nav-item dropdown">Appendicies<ul class="nav-dropdown blue-light">
            <li class="nav-item"><a class="nav-link" href="/appendix_1.html"><span>Appendix 1</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/appendix_2.html"><span>Appendix 2</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/appendix_3.html"><span>Appendix 3</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/appendix_4.html"><span>Appendix 4</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/appendix_5.html"><span>Appendix 5</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/appendix_6.html"><span>Appendix 6</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/appendix_7.html"><span>Appendix 7</span></a></li>
          </ul>
        </li>
        <li class="nav-item dropdown">Supplemental <ul class="nav-dropdown blue-light">
            <li class="nav-item"><a class="nav-link" href="/supplement-a1.html"><span>Supplement A1</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-a2.html"><span>Supplement A2</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-a3.html"><span>Supplement A3</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-a4.html"><span>Supplement A4</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-b1.html"><span>Supplement B1</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-b2.html"><span>Supplement B2</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-b3.html"><span>Supplement B3</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-b4.html"><span>Supplement B4</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-b5.html"><span>Supplement B5</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-b6.html"><span>Supplement B6</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-b7.html"><span>Supplement B7</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-b8.html"><span>Supplement B8</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-b9.html"><span>Supplement B9</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-b10.html"><span>Supplement B10</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-c1.html"><span>Supplement C1</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-c2.html"><span>Supplement C2</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-c3.html"><span>Supplement C3</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-d1.html"><span>Supplement D1</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-d2.html"><span>Supplement D2</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-d3.html"><span>Supplement D3</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-d4.html"><span>Supplement D4</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-d5.html"><span>Supplement D5</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-d6.html"><span>Supplement D6</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-d7a.html"><span>Supplement D7a</span></a></li>
                        <li class="nav-item"><a class="nav-link" href="/supplement-d7b.html"><span>Supplement D7b</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-d8.html"><span>Supplement D8</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-d9.html"><span>Supplement D9</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/supplement-d10.html"><span>Supplement D10</span></a></li>
          </ul>
        </li>
        <li class="nav-item dropdown"> <a class="nav-link" href="/dev_info.html"><span>Developer Info</span></a>
          <ul class="nav-dropdown blue-light">
            <li class="nav-item"><a class="nav-link" href="/GetVelma_ForEclipse.html"><span>Clone Github to Local Machine</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/CellSpecificBurnDisturbance_Configuration_Guide.html"><span>Cell Specific Burn Disturbance Config Guide</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/Configuration_Checker_Guide.html"><span>Configuration Checker Guide</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/DefaultSedimentModel_Configuration_Guide.html"><span>Default Sediment Model Config Guide</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/ForestBurnLsrDisturbanceModel_Overview.html"><span>Forest Burn LSR Disturbance Model</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/JPDEM_ReachMapping_Demonstration.html"><span>JPDEM Reaching Mapping Demo</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/MinMaxAirT_WeatherDrivers.html"><span>Min Max Air Temp Weather Drivers</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/ModifySpatialDataByMap_Guide.html"><span>Modify Spatial Data by Map Guide</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/ObsRunoff_and_NaNs.html"><span>OBS Runnoff and NaNs</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/OrganicContaminant_Overview.html"><span>Organic Contaminant Overview</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/OrganicContaminant_Remediation_Configuration_Guide.html"><span>Organic Contaminant Redemption Config Guide</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/OrganicContaminant_Tracer_Configuration_Guide.html"><span>Organic Contaminant Tracter Config Guide</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/ReachSpecificObservedRunnoff.html"><span>Reach Specific Observed Runnoff</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/Sediment_Output_Data_Summary.html"><span>Sediment Output Data Summary</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/SnowDepth_Initialization_Guide.html"><span>Snow Depth Initialization Guide</span></a></li>
          </ul>
        </li>
        <li class="nav-item dropdown"> <a class="nav-link" href="/dev_utils.html"><span>Developer Utils</span></a>
          <ul class="nav-dropdown blue-light">
            <li class="nav-item"><a class="nav-link" href="/AscMapOct_Guide.html"><span>Ascii Map Oct Guide </span></a></li>
            <li class="nav-item"><a class="nav-link" href="/AscRangeMask_Guide.html"><span>Ascii Range Mask Guide</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/MoeVelGenerator_Guide.html"><span>MOEA-to-VELMA Configuration Generator</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/NashSutcliffeCalculator_Guide.html"><span>Tool for Computing Nash-Sutcliffe Coefficients</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/NseQuarts_Guide.html"><span>NseQuarts Guide</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/VelmaSimRunner_QuickRef.html"><span>VelmaSimRunner Quick Reference</span></a></li>
            <li class="nav-item"><a class="nav-link" href="/VelmaSimRunner.html"><span>VelmaSimRunner Full Guide</span></a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </div>
  <div class="main_body">
    <div class="container">
      <h1>Configuring An Organic Contaminant to Include Remediation Effects</h1>
      <h2>Overview</h2>
      <p>VELMA simulation configurations may include parameterizations for Organic Contaminants.
        Simulation configurations that <em>do</em> include Organic Contaminants may also include additional parameterizations for Modify-by-Map disturbances that allow simulation of decay-based and/or humus-based remediation effects for of the parameterized Organic Contaminants by providing spatially-explicitly scaling factors to boost increased decay and/or increased humus-based binding.</p>
      <h2>Configuration Steps</h2>
      <p>The overall process of adding remediation parameterization for an Organic Contaminant is as follows:</p>
      <h3>1. Add and configure an OrganicContaminantModelto your VELMA simulation configuration.</h3>
      <p>Follow the steps of the separate documentation for adding/configuring OrganicContaminantModel parameterizations to a simulation configuration.</p>
      <h3>2. Set the Organic Contaminant's <code>setDecompositionFactorMode</code> value</h3>
      <p>The value of the <code>setDecompositionFactorMode</code> parameter specifies the type or types of remediation factors (decay-based and/or humus-based) the Organic Contaminant will be affected by.</p>
      <table>
        <thead>
          <tr>
            <th style="text-align:left">Desired Remediation</th>
            <th style="text-align:left">Value for <code>setDecompositionFactorMode</code></th>
            <th style="text-align:left">Simulation Effect</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="text-align:left">None</td>
            <td style="text-align:left">NONE</td>
            <td style="text-align:left">Use actual humus and chemMaxDecay values, ignore scaling factor values if present.</td>
          </tr>
          <tr>
            <td style="text-align:left">Humus-based</td>
            <td style="text-align:left">HUMUS_ONLY</td>
            <td style="text-align:left">Multiply actual humus amounts by cell-specific humus scaling factor values.</td>
          </tr>
          <tr>
            <td style="text-align:left">Decay-based</td>
            <td style="text-align:left">DECAY_ONLY</td>
            <td style="text-align:left">Multiply specified chemMaxDecay value by cell-specific decay scaling factor values.</td>
          </tr>
          <tr>
            <td style="text-align:left">Both Humus and Decay</td>
            <td style="text-align:left">BOTH</td>
            <td style="text-align:left">Multiply both humus and chemMaxDecay values by their respective cell-specific factors.</td>
          </tr>
        </tbody>
      </table>
      <h3>3. Create raster (.asc) map file(s) with cell-specific scaling factor values</h3>
      <p>The raster (.asc) map files makes cell-specific scaling factor values possible.
        Generate them using whatever GIS tool or software you prefer.
        Regardless of the method you use to create them, they must abide by the following rules:</p>
      <ul>
        <li>Each type of remediation must have a separate .asc map file, so if you specified <code>setDecompositionFactorMode</code>=<code>BOTH</code>, you will need 2 files.</li>
        <li>Each .asc map file must have the same dimensions (header row values) as the simulation's DEM map, specified as the value of the <code>input_dem</code> configuration parameter.</li>
        <li>Each .asc map file must <strong><em>not</em></strong> contain <code>nodata_value</code> for <em>any</em> location in the map.</li>
        <li>Set the value of cell loctions that are unaffected by remediation to 1.0 (<strong><em>not</em></strong> zero!).</li>
        <li>The file's encoding should be ASCII, or ISO-LATIN (UTF-8 is permitted, but not encouraged, UTF-16 and UTF-32 are not supported.)</li>
      </ul>
      <h3>4. Add and configure a Modify-by-Map disturbance for each scaling factor map</h3>
      <p>Modify-by-Map disturbances &quot;connect&quot; the maps of scaling factor values to a specific Organic Contaminant at a specific point in time during the simulation run.<br>
        You must provide a separate Modify-by-Map disturbance for each scaling factor map generated.<br>
        For example: if you specified <code>setDecompositionFactorMode</code>=<code>BOTH</code>, and created the two separate .asc map files (one with decay scaling factor values, the other with humus factor values),
        then you will need to configure two separate Modify-by-Map disturbances to connect the two maps to the single Organin Contaminant.</p>
      <p>Adding and Configuring Modify-By-Map Disturbance(s) for Remediation Effects:</p>
      <ol>
        <li>Click the <code>Edit</code> --&gt; <code>Disturbances</code> --&gt; <code>Add a Disturbance</code> menu item.<br>
          (This opens the &quot;Specify Disturbance Model Type and Name&quot; dialog window.)</li>
        <li>Select the <code>ModifySpatialDataByMapDisturbanceModel</code> item from the dialog window's &quot;Disturbance Type&quot; drop-down list.</li>
        <li>Type a name into the &quot;Disturbance Name&quot; text field.<br>
          The name will become the parameterization group's Item-level identifier.<br>
          It can be any name that <a href="#Disturbance-Name-Rules">follows the rules</a> and that is meaningful to you.</li>
        <li>Click OK to accept your selections, close the dialog window, and add the parameterization group.</li>
      </ol>
      <p>When the parameterization group is added, JVelma shifts the GUI to display the &quot;All Parameters&quot; tab, with column filtering set to show only the newly-added group.</p>
      <p>Here is an example parameterization group:</p>
      <table>
        <thead>
          <tr>
            <th style="text-align:left">Group</th>
            <th style="text-align:left">Item</th>
            <th style="text-align:left">Parameter</th>
            <th style="text-align:left">Value (examples)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="text-align:left">disturbance</td>
            <td style="text-align:left">DecayFactorMel</td>
            <td style="text-align:left">modelClass</td>
            <td style="text-align:left">ModifySpatialDataByMapDisturbanceModel</td>
          </tr>
          <tr>
            <td style="text-align:left">disturbance</td>
            <td style="text-align:left">DecayFactorMel</td>
            <td style="text-align:left">initializeActiveLoops</td>
            <td style="text-align:left">1</td>
          </tr>
          <tr>
            <td style="text-align:left">disturbance</td>
            <td style="text-align:left">DecayFactorMel</td>
            <td style="text-align:left">initializeActiveYears</td>
            <td style="text-align:left">2011</td>
          </tr>
          <tr>
            <td style="text-align:left">disturbance</td>
            <td style="text-align:left">DecayFactorMel</td>
            <td style="text-align:left">initializeActiveJdays</td>
            <td style="text-align:left">181</td>
          </tr>
          <tr>
            <td style="text-align:left">disturbance</td>
            <td style="text-align:left">DecayFactorMel</td>
            <td style="text-align:left">occursAtStepStart</td>
            <td style="text-align:left">true</td>
          </tr>
          <tr>
            <td style="text-align:left">disturbance</td>
            <td style="text-align:left">DecayFactorMel</td>
            <td style="text-align:left">spatialDataFileFullName</td>
            <td style="text-align:left">./o_9_Disturbance/Remediation_Data.asc</td>
          </tr>
          <tr>
            <td style="text-align:left">disturbance</td>
            <td style="text-align:left">DecayFactorMel</td>
            <td style="text-align:left">setCellOutcome</td>
            <td style="text-align:left">REPLACE</td>
          </tr>
          <tr>
            <td style="text-align:left">disturbance</td>
            <td style="text-align:left">DecayFactorMel</td>
            <td style="text-align:left">setMapValueMode</td>
            <td style="text-align:left">FRACTION</td>
          </tr>
          <tr>
            <td style="text-align:left">disturbance</td>
            <td style="text-align:left">DecayFactorMel</td>
            <td style="text-align:left">spatialDataName</td>
            <td style="text-align:left">CONTAMINANT_DECAY_FACTOR_MELAMINE</td>
          </tr>
          <tr>
            <td style="text-align:left">disturbance</td>
            <td style="text-align:left">DecayFactorMel</td>
            <td style="text-align:left">spatialDataLayer</td>
            <td style="text-align:left">1</td>
          </tr>
        </tbody>
      </table>
      <p>Each Modify-by-Map entry you add to your simulation is a <code>__disturbance__</code> Group member.
        The Disturbance Name&quot; you provide becomes its' Item identifier within the Group.
        (In the above example, the Disturbance Name was set as <code>DecayFactorMel</code>.)</p>
      <p>The above example connects the scaling factors specified in .asc map file <code>Remediation_Data.asc</code> to the OrganicContaminantModel with <code>uniqueName</code>=<code>Melamine</code>.<br>
        The scaling factors will be applicable during the simulation run from year 2011, Julian day 181, onwards.
        The scaling factors in the .asc map file will be applied to decay calculations for the contaminant.</p>
      <p><strong>Parameter-Specific Notes</strong></p>
      <p>Leave the <code>modelClass</code> parameter <strong><em>untouched and as-is</em></strong>.
        Its value is automatically set by JVelma when you add the ModifySpatialDataByMapDisturbanceModel
        parameter group to the configuration.</p>
      <p>Set the <code>initializeActiveLoops</code>, <code>initializeActiveYears</code>, and <code>initializeActiveJdays</code>
        parameter values to the loop, year, and Julian day (respectively) within the simulation run when the remediation effect should become active.</p>
      <p>Set <code>occursAtStepStart</code> to true, to ensure the remediation effect begins on the date you specified, not on the day after that.</p>
      <p>Set <code>spatialDataFileFullName</code> to the name of the raster .asc data file containing the cell-specific decay
        or humus modification factor values.<br>
        Unless the specified filename is a fully-specified path + name, it is assumed to be relative to the directory location specified by the simulation configuration's <code>inputDataLocationRootName</code>/<code>inputDataLocationDirName</code> pair of parameters.<br>
        Use forward slash “/” characters as path separators. Also, be very careful with whitespace; if there is any, it must exactly match whatever whitespace is present in the actual path and filename.</p>
      <p>Set <code>setCellOutcome</code> to <code>REPLACE</code>: <strong><em>no</em></strong> other value is appropriate for use as a remediation scaling factors source.</p>
      <p>Set <code>setMapValueMode</code> to <code>VALUE</code>: this setting provides the <em>most straightforward</em> use-case for a remediation scaling factors source.
        Combined with <code>setCellOutcome</code>=<code>REPLACE</code>, <code>setMapValueMode</code>=<code>VALUE</code> configures the disturbance to directly set the specified map's specified values into the spatial data pool specified by <code>spatialDataName</code>.</p>
      <p>Set the <code>spatialDataName</code> to the name of the appropriate spatial data pool.
        That name is derived from a factor-specific prefix, and the value of the <code>uniqueName</code> parameter of the organic contaminant that it will affect.</p>
      <table>
        <thead>
          <tr>
            <th style="text-align:left">Factor-specific prefix</th>
            <th style="text-align:left">Identifies the spatial pool for ...</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="text-align:left">CONTAMINANT_DECAY_FACTOR_</td>
            <td style="text-align:left">cell-specific scaling values applied to decay</td>
          </tr>
          <tr>
            <td style="text-align:left">CONTAMINANT_HUMUS_FACTOR_</td>
            <td style="text-align:left">cell-specific scaling factor values applied to humus</td>
          </tr>
        </tbody>
      </table>
      <p>In the example parameterization above, the specified <code>spatialDataFileFullName</code> map values will be the remediation factor for decay, and affect the contaminant with the <code>uniqueName</code> &quot;Melamine&quot;.<br>
        Thus, the <code>spatialDataName</code> value is:<br>
        <code>CONTAMINANT_DECAY_FACTOR_</code> + <code>MELAMINE</code> = <code>CONTAMINANT_DECAY_FACTOR_MELAMINE</code>
      </p>
      <p>The <code>spatialDataLayer</code> parameter's value <strong><em>must</em></strong> be set to 1.</p>
      <p>For additional information about Modify-by-Map disturbances, see the <a href="../HowTo-ModifySpatialDataByMap/ModifySpatialDataByMap_Guide.html">Modifying a VELMA SpatialData Pool Using Grid ASCII Map Data</a> &quot;HowTo&quot; document.</p>
      <h2>How It Works</h2>
      <p>During each VELMA simulation step, the amount of organic contaminant within a given cell of the delineated watershed is modified by the processes of:</p>
      <ul>
        <li>Hydrologic lateral transport</li>
        <li>Hydrologic vertical transport</li>
        <li>Sorption</li>
        <li>Decay</li>
      </ul>
      <p>During the sorption calculation, if a given cell has had a HUMUS scaling factor set for it (via a Modify-by-Map), for the current simulation step, then the actual amount of humus carbon in the cell is multiplied by the scaling factor, effectively &quot;boosting&quot; the humus-based sorption.</p>
      <p>During the decay calculation, if a given cell has had a DECAY scaling factor set for it (via a Modify-by-Map), for the current simulation step, then the <code>setChemMaxDecay</code> value specified for the Organic Contaminant is multiplied by the scaling factor and the product of the two <code>(max-decay fraction * decay scaling factor)</code> is used as the maximum decay multiplier instead of the max-decay fraction alone.</p>
      <p>Be mindful of the similar, yet distinctly <em>different</em> behaviors of HUMUS and DECAY scaling factors.
        In both cases, the scaling factor is used as a multiplier, but for sorption/HUMUS, it is multiplying an <em>amount</em>, while for DECAY it is multiplying a <em>fraction</em>.</p>
      <p>For DECAY calculations, this means that a sufficiently large DECAY scaling fraction may result in calculating a decayed amount that is larger then the actual amount present in the cell.
        VELMA treats this situation as &quot;all of the contaminant has decayed&quot;, and zeroes the amount of contaminant remaining in the cell.
        If this zeroing not the intent, careful pairing of the Organic Contaminant's <code>setChemMaxDecay</code> value with the cell-specific DECAY map's values is required.<br>
        Example:<br>
        Suppose an Organic Contaminant's <code>setChemMaxDecay</code>=<code>0.75</code>, the DECAY scaling factor at a given cell is 1.5, and the cell contains 100.0mg of contaminant.<br>
        The maximum decay amount will be calculated as: <code>(0.75 * 1.5) * 100.0 = 112.5</code>.<br>
        The entire decay/decomposition process might result in an amount less than 112.5, but if that amount is still more than 100.0 at the end of the contaminant decay/decomposition process, the cell's contaminant result will be zeroed, and the full amount that the cell had available (100.0mg) will be reported as decayed -- <em>not</em> the amount greater than 100.0 that was calculated from the max-decay fraction and scaling factor.</p>
      <h2>Additional Information</h2>
      <h3>Disturbance Name Rules</h3>
      <p>The name you provide for a disturbance parameterization group must follow these rules:</p>
      <ul>
        <li>Must begin with a letter</li>
        <li>After the first letter, must consist entirely of letter, digit, dash (&quot;-&quot;), and underscore characters (&quot;_&quot;).<br>
          No other characters are allowed.<br>
          Do NOT include whitespace or other punctuation characters (e.g. &quot;:&quot;) in Disturbance Names.</li>
        <li>Must be unique to a given disturbance parameterization group.</li>
      </ul>

    </div>
  </div>
</body>
<footer id="footer">
  <p>VELMA 2.2 DOCUMENTATION</p>
</footer>
</head>

</html>